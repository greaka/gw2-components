var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t,s,e){return t(e={path:s,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},e.exports),e.exports}var e=s((function(t,s){var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();t.exports=s=e.fetch,s.default=e.fetch.bind(e),s.Headers=e.Headers,s.Request=e.Request,s.Response=e.Response})),r={series:async function(t){let s=[];for(let e=0;e!==t.length;e++)s.push(await t[e]());return s},parallel:function(t){return Promise.all(t.map(t=>t()))}};const i={type:"json",method:"GET",headers:{},body:void 0};let n=()=>!1,h=()=>!1;var o={retry:function(t){n=t},retryWait:function(t){h=t},single:u,many:function(t,s={}){return(s.waitTime?r.series:r.parallel)(t.map(t=>()=>(t=>u(t,s).then(t=>c(()=>t,s.waitTime)))(t)))}};function u(t,s={}){let r=1;const o=()=>function(t,s){let r,n;return s=Object.assign({},i,s),new Promise((i,h)=>{e(t,s).then((function(t){switch(n=t,s.type){case"response":return t;case"json":return t.json();default:return t.text()}})).then((function(t){if(n&&n.status>=400)throw r=t,new Error("Response status indicates error");i(t)})).catch((function(t){n&&n.status>=400&&(t=new Error("Status "+n.status));let s=new Error(t.message);s.response=n,s.content=r,h(s)}))})}(t,s).catch(t=>{if(n(++r,t))return c(o,h(r));throw t});return o()}function c(t,s){return new Promise(e=>{setTimeout(()=>e(t()),s||0)})}function a(){return Promise.resolve(null)}function l(){return Promise.resolve(!0)}function d(t){const s=t.map(()=>null);return Promise.resolve(s)}function p(){return Promise.resolve(!0)}function w(){return Promise.resolve(!0)}var v=Object.prototype.hasOwnProperty;function m(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}var f,g=function(t,s){s=s||"";var e,r,i=[];for(r in"string"!=typeof s&&(s="?"),t)if(v.call(t,r)){if((e=t[r])||null!=e&&!isNaN(e)||(e=""),r=encodeURIComponent(r),e=encodeURIComponent(e),null===r||null===e)continue;i.push(r+"="+e)}return i.length?s+i.join("&"):""},x=function(t){for(var s,e=/([^=?&]+)=?([^&]*)/g,r={};s=e.exec(t);){var i=m(s[1]),n=m(s[2]);null===i||null===n||i in r||(r[i]=n)}return r},y=s((function(t){t.exports=function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var s=t.length,e=-1;e++<s;)for(var r=e+1;r<t.length;++r)t[e]===t[r]&&t.splice(r--,1);return t},t.exports.immutable=function(s){if(!Array.isArray(s))throw new TypeError("array-unique expects an array.");for(var e=s.length,r=new Array(e),i=0;i<e;i++)r[i]=s[i];return t.exports(r)}})),b=s((function(s,e){(function(){function t(t,s){var e=[];s=parseInt(s)||2;for(var r=0;r<Math.ceil(t.length/s);r++){var i=r*s;e.push(t.slice(i,i+s))}return e}s.exports&&(e=s.exports=t),e.chunk=t}).call(t)})),E=s((function(t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(t){for(var s,e=t.length,r=e^e,i=0;e>=4;)s=1540483477*(65535&(s=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(s>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),e-=4,++i;switch(e){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}}));(f=E)&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default");const $=E.default;let k={};var P=function(t){return k[t]||(k[t]=$(t)),k[t]};const I=t=>JSON.parse(JSON.stringify(t));var C=class{constructor(t){this.client=t.client,this.schemaVersion=t.schemaVersion||"2019-03-20T00:00:00.000Z",this.lang=t.lang,this.apiKey=t.apiKey,this.fetch=t.fetch,this.caches=t.caches,this.debug=t.debug,this.baseUrl="https://api.guildwars2.com",this.isPaginated=!1,this.maxPageSize=200,this.isBulk=!1,this.supportsBulkAll=!0,this.isLocalized=!1,this.isAuthenticated=!1,this.isOptionallyAuthenticated=!1,this.credentials=!1,this._skipCache=!1}schema(t){return this.schemaVersion=t,this.debugMessage("set the schema to "+t),this}_schemaIncludes(t){return this.schemaVersion>=t}language(t){return this.lang=t,this.debugMessage("set the language to "+t),this}authenticate(t){return this.apiKey=t,this.debugMessage("set the api key to "+t),this}debugging(t){return this.debug=t,this}debugMessage(t){this.debug&&console.log("[gw2api-client] "+t)}live(){return this._skipCache=!0,this.debugMessage("skipping cache"),this}ids(){if(this.debugMessage(`ids(${this.url}) called`),!this.isBulk)return Promise.reject(new Error('"ids" is only available for bulk expanding endpoints'));if(!this.cacheTime)return this._ids();const t=this._cacheHash("ids"),s=s=>s?(this.debugMessage(`ids(${this.url}) resolving from cache`),s):this._ids().then(s=>(this._cacheSetSingle(t,s),s));return(this._skipCache?Promise.resolve(!1).then(s):this._cacheGetSingle(t).then(s)).then(I)}_ids(){return this.debugMessage(`ids(${this.url}) requesting from api`),this._request(this.url)}get(t,s=!1){if(this.debugMessage(`get(${this.url}) called`),!t&&this.isBulk&&!s)return Promise.reject(new Error('"get" requires an id'));if(!this.cacheTime)return this._get(t,s);const e=this._cacheHash(t),r=r=>r?(this.debugMessage(`get(${this.url}) resolving from cache`),r):this._get(t,s).then(t=>(this._cacheSetSingle(e,t),t));return(this._skipCache?Promise.resolve(!1).then(r):this._cacheGetSingle(e).then(r)).then(I)}_get(t,s){return this.debugMessage(`get(${this.url}) requesting from api`),this._request(this.isBulk&&!s?`${this.url}?id=${t}`:s?this.url+t:this.url)}many(t){if(this.debugMessage(`many(${this.url}) called (${t.length} ids)`),!this.isBulk)return Promise.reject(new Error('"many" is only available for bulk expanding endpoints'));if(0===t.length)return Promise.resolve([]);if(t=y.immutable(t),!this.cacheTime)return this._many(t);const s=t.map(t=>this._cacheHash(t)),e=s=>{if((s=s.filter(t=>t)).length===t.length)return this.debugMessage(`many(${this.url}) resolving fully from cache`),s;this.debugMessage(`many(${this.url}) resolving partially from cache (${s.length} ids)`);const e=r(t,s);return this._many(e,s.length>0).then(e=>{const r=e.map(t=>[this._cacheHash(t.id),t]);return this._cacheSetMany(r),e=e.concat(s),this._sortByIdList(e,t)})},r=(t,s)=>{const e={};return s.map(t=>{e[t.id]=1}),t.filter(t=>1!==e[t])};return(this._skipCache?Promise.resolve([]).then(e):this._cacheGetMany(s).then(e)).then(I)}_many(t,s=!1){this.debugMessage(`many(${this.url}) requesting from api (${t.length} ids)`);const e=b(t,this.maxPageSize).map(t=>`${this.url}?ids=${t.join(",")}`);return this._requestMany(e).then(t=>t.reduce((t,s)=>t.concat(s),[])).catch(t=>s&&t.response&&404===t.response.status?Promise.resolve([]):Promise.reject(t))}page(t,s=this.maxPageSize){if(this.debugMessage(`page(${this.url}) called`),!this.isBulk&&!this.isPaginated)return Promise.reject(new Error('"page" is only available for bulk expanding or paginated endpoints'));if(s>this.maxPageSize||s<=0)return Promise.reject(new Error(`"size" has to be between 0 and ${this.maxPageSize}, was ${s}`));if(t<0)return Promise.reject(new Error("page has to be 0 or greater"));if(!this.cacheTime)return this._page(t,s);const e=this._cacheHash("page-"+t+"/"+s),r=r=>r?(this.debugMessage(`page(${this.url}) resolving from cache`),r):this._page(t,s).then(t=>{let s=[[e,t]];return this.isBulk&&(s=s.concat(t.map(t=>[this._cacheHash(t.id),t]))),this._cacheSetMany(s),t});return(this._skipCache?Promise.resolve(!1).then(r):this._cacheGetSingle(e).then(r)).then(I)}_page(t,s){return this.debugMessage(`page(${this.url}) requesting from api`),this._request(`${this.url}?page=${t}&page_size=${s}`)}all(){if(this.debugMessage(`all(${this.url}) called`),!this.isBulk&&!this.isPaginated)return Promise.reject(new Error('"all" is only available for bulk expanding or paginated endpoints'));if(!this.cacheTime)return this._all();const t=this._cacheHash("all"),s=s=>s?(this.debugMessage(`all(${this.url}) resolving from cache`),s):this._all().then(s=>{let e=[[t,s]];return this.isBulk&&(e=e.concat(s.map(t=>[this._cacheHash(t.id),t]))),this._cacheSetMany(e),s});return(this._skipCache?Promise.resolve(!1).then(s):this._cacheGetSingle(t).then(s)).then(I)}_all(){if(this.debugMessage(`all(${this.url}) requesting from api`),this.isBulk&&this.supportsBulkAll)return this._request(this.url+"?ids=all");let t;return this._request(`${this.url}?page=0&page_size=${this.maxPageSize}`,"response").then(s=>(t=s.headers.get("X-Result-Total"),s.json())).then(s=>{if(t<=this.maxPageSize)return s;let e=[];for(let s=1;s<Math.ceil(t/this.maxPageSize);s++)e.push(`${this.url}?page=${s}&page_size=${this.maxPageSize}`);return this._requestMany(e).then(t=>(t=t.reduce((t,s)=>t.concat(s),[]),s.concat(t)))})}_cacheSetSingle(t,s){this.caches.map(e=>e.set(t,s,this.cacheTime))}_cacheSetMany(t){t=t.map(t=>[t[0],t[1],this.cacheTime]),this.caches.map(s=>s.mset(t))}_cacheGetSingle(t,s=0){return this.caches[s].get(t).then(e=>e||s===this.caches.length-1?e:this._cacheGetSingle(t,++s))}_cacheGetMany(t,s=0){return this.caches[s].mget(t).then(e=>{if(e.filter(t=>t).length===t.length||s===this.caches.length-1)return e;let r=e.map((s,e)=>!s&&t[e]).filter(t=>t);return this._cacheGetMany(r,++s).then(t=>{let s=0;return e.map(e=>e||t[s++])})})}_cacheHash(t){let s=P(this.baseUrl+this.url+":"+this.schemaVersion);return t&&(s+=":"+t),this.isLocalized&&(s+=":"+this.lang),this._usesApiKey()&&(s+=":"+P(this.apiKey+"")),s}_request(t,s="json"){return t=this._buildUrl(t),this.fetch.single(t,{type:s,credentials:this.credentials?"include":void 0})}_requestMany(t,s="json"){return t=t.map(t=>this._buildUrl(t)),this.fetch.many(t,{type:s,credentials:this.credentials?"include":void 0})}_buildUrl(t){const s=(t=this.baseUrl+t).split("?");let e=x(s[1]||""),r={};return r.v=this.schemaVersion,this._usesApiKey()&&(r.access_token=this.apiKey),this.isLocalized&&(r.lang=this.lang),r=Object.assign(r,e),r=g(r,!0).replace(/%2C/g,","),s[0]+r}_sortByIdList(t,s){let e={};return s.map((t,s)=>{e[t]=s}),t.sort((t,s)=>e[t.id]-e[s.id]),t}_usesApiKey(){return this.isAuthenticated&&(!this.isOptionallyAuthenticated||this.apiKey)}},R=class extends C{constructor(t,s){super(t),this.name=s,this.url="/v2/characters",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isAuthenticated=!0,this.cacheTime=300}backstory(){return new _(this,this.name)}core(){return new U(this,this.name)}crafting(){return new q(this,this.name)}equipment(){return new j(this,this.name)}heropoints(){return new D(this,this.name)}inventory(){return new T(this,this.name)}quests(){return new O(this,this.name)}recipes(){return new S(this,this.name)}sab(){return new M(this,this.name)}skills(){return new z(this,this.name)}specializations(){return new A(this,this.name)}training(){return new B(this,this.name)}};class _ extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/backstory`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.backstory)}}class U extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/core`,this.isAuthenticated=!0,this.cacheTime=300}}class q extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/crafting`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.crafting)}}class j extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/equipment`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.equipment)}}class D extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/heropoints`,this.isAuthenticated=!0,this.cacheTime=300}}class T extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/inventory`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.bags)}}class O extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/quests`,this.isAuthenticated=!0,this.cacheTime=300}}class S extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/recipes`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.recipes)}}class M extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/sab`,this.isAuthenticated=!0,this.cacheTime=300}}class z extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/skills`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.skills)}}class A extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/specializations`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.specializations)}}class B extends C{constructor(t,s){super(t),this.url=`/v2/characters/${encodeURIComponent(s)}/training`,this.isAuthenticated=!0,this.cacheTime=300}get(){return super.get().then(t=>t.training)}}var N=class extends C{constructor(t,s){super(t),this.fromAccount=s}amulets(){return new Z(this)}games(){return new J(this)}heroes(){return this.fromAccount?new G(this):new W(this)}ranks(){return new F(this)}seasons(t){return new H(this,t)}standings(){return new Q(this)}stats(){return new X(this)}};class G extends C{constructor(t){super(t),this.url="/v2/account/pvp/heroes",this.isAuthenticated=!0,this.cacheTime=300}}class Z extends C{constructor(t){super(t),this.url="/v2/pvp/amulets",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class J extends C{constructor(t){super(t),this.url="/v2/pvp/games",this.isPaginated=!0,this.isBulk=!0,this.isAuthenticated=!0,this.cacheTime=300}}class W extends C{constructor(t){super(t),this.url="/v2/pvp/heroes",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class F extends C{constructor(t){super(t),this.url="/v2/pvp/ranks",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class H extends C{constructor(t,s){super(t),this.id=s,this.url="/v2/pvp/seasons",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}leaderboards(){return new K(this,this.id)}}class K extends C{constructor(t,s){super(t),this.id=s,this.url=`/v2/pvp/seasons/${s}/leaderboards`,this.cacheTime=86400}ids(){return super.get("",!0)}board(t,s){return new L(this,this.id,t,s)}}class L extends C{constructor(t,s,e,r){super(t),this.url=`/v2/pvp/seasons/${s}/leaderboards/${e}/${r}`,this.isPaginated=!0,this.cacheTime=300}}class Q extends C{constructor(t){super(t),this.url="/v2/pvp/standings",this.isAuthenticated=!0,this.cacheTime=300}}class X extends C{constructor(t){super(t),this.url="/v2/pvp/stats",this.isAuthenticated=!0,this.cacheTime=300}}var V=class extends C{delivery(){return new Y(this)}exchange(){return new tt(this)}listings(){return new st(this)}prices(){return new et(this)}transactions(){return{current:()=>({buys:()=>new rt(this,"current","buys"),sells:()=>new rt(this,"current","sells")}),history:()=>({buys:()=>new rt(this,"history","buys"),sells:()=>new rt(this,"history","sells")})}}};class Y extends C{constructor(t){super(t),this.url="/v2/commerce/delivery",this.isAuthenticated=!0,this.cacheTime=300}}class tt extends C{constructor(t){super(t),this.url="/v2/commerce/exchange",this.cacheTime=600}gems(t){return super.get("/gems?quantity="+t,!0)}coins(t){return super.get("/coins?quantity="+t,!0)}}class st extends C{constructor(t){super(t),this.url="/v2/commerce/listings",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=120}}class et extends C{constructor(t){super(t),this.url="/v2/commerce/prices",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=60}}class rt extends C{constructor(t,s,e){super(t),this.url=`/v2/commerce/transactions/${s}/${e}`,this.isPaginated=!0,this.isAuthenticated=!0,this.cacheTime=600}}const it=/]|^\[/g,nt=/\.?\[/g;var ht=function(t,s,e){return t&&Object(t)===t?function(t,s,e){let r=t;for(const t of s)if(r=r[t],null==r)return e;return r}(t,Array.isArray(s)?s:s.replace(it,"").replace(nt,".").split("."),e):e},ot=async function(t){const s=await Promise.all(Object.values(t).map(t=>t()));if(Array.isArray(t))return s;const e=Object.keys(t);return s.reduce((t,s,r)=>(t[e[r]]=s,t),{})};function ut(t){return()=>new Promise((s,e)=>{t().then(t=>s(t)).catch(t=>{let r=ht(t,"response.status"),i=ht(t,"content.text");if(r||i)return console.warn(`API error: ${i} (${r})`),s(null);e(t)})})}function ct(t,s,e){const r=s.split(".");let i=t;r.forEach((t,s)=>{i[t]||(i[t]={}),s!==r.length-1?i=i[t]:i[t]=e})}var at=function(t){const s=t.client,e={account:ut(()=>s.account().get()),achievements:ut(()=>s.account().achievements().get()),bank:ut(()=>s.account().bank().get()),characters:ut(()=>s.characters().all()),"commerce.buys":ut(()=>s.commerce().transactions().current().buys().all()),"commerce.sells":ut(()=>s.commerce().transactions().current().sells().all()),"commerce.delivery":ut(()=>s.commerce().delivery().get()),dungeons:ut(()=>s.account().dungeons().get()),dyes:ut(()=>s.account().dyes().get()),gliders:ut(()=>s.account().gliders().get()),finishers:ut(()=>s.account().finishers().get()),"home.cats":ut(()=>s.account().home().cats().get()),"home.nodes":ut(()=>s.account().home().nodes().get()),guilds:ut(()=>function(t){return t.account().get().then(s=>{if(!s.guild_leader)return[];let e=s.guild_leader.map(s=>ut(()=>function(s){let e={data:ut(()=>t.guild().get(s)),members:ut(()=>t.guild(s).members().get()),ranks:ut(()=>t.guild(s).ranks().get()),stash:ut(()=>t.guild(s).stash().get()),teams:ut(()=>Promise.resolve(null)),treasury:ut(()=>t.guild(s).treasury().get()),upgrades:ut(()=>t.guild(s).upgrades().get())};return ot(e)}(s)));return ot(e)})}(s)),luck:ut(()=>s.account().luck().get()),mailcarriers:ut(()=>s.account().mailcarriers().get()),masteries:ut(()=>s.account().masteries().get()),"mastery.points":ut(()=>s.account().mastery().points().get()),materials:ut(()=>s.account().materials().get()),minis:ut(()=>s.account().minis().get()),"mounts.skins":ut(()=>s.account().mounts().skins().get()),"mounts.types":ut(()=>s.account().mounts().types().get()),novelties:ut(()=>s.account().novelties().get()),outfits:ut(()=>s.account().outfits().get()),"pvp.games":ut(()=>s.account().pvp().games().all()),"pvp.heroes":ut(()=>s.account().pvp().heroes().get()),"pvp.standings":ut(()=>s.account().pvp().standings().get()),"pvp.stats":ut(()=>s.account().pvp().stats().get()),raids:ut(()=>s.account().raids().get()),recipes:ut(()=>s.account().recipes().get()),shared:ut(()=>s.account().inventory().get()),skins:ut(()=>s.account().skins().get()),titles:ut(()=>s.account().titles().get()),wallet:ut(()=>s.account().wallet().get())};return ot(e).then(t=>((t=function(t){let s={};for(let e in t)ct(s,e,t[e]);return s}(t)).characters=function(t){return t?t.filter(t=>!t.flags||!t.flags.includes("Beta")):null}(t.characters),t))};function lt(t,s){return new Date(t.toISOString().replace(/T.*Z/,`T${s}.000Z`))}function dt(t){return t=t?new Date(t):new Date,lt(t=new Date(t.getTime()+864e5),"00:00:00")}function pt(t){const s=(t=t?new Date(t):new Date).getUTCDay(),e=t.getUTCHours(),r=t.getUTCMinutes();let i=0;switch(s){case 0:i=1;break;case 1:i=e>7||7===e&&r>=30?7:0;break;default:i=8-s}return lt(t=new Date(t.getTime()+864e5*i),"07:30:00")}at.wrap=ut;var wt=function(t){return new Date(dt(t).getTime()-864e5)},vt=function(t){return new Date(pt(t).getTime()-6048e5)};class mt extends C{constructor(t){super(t),this.url="/v2/account",this.isAuthenticated=!0,this.cacheTime=300}achievements(){return new ft(this)}bank(){return new gt(this)}characters(t){return new R(this,t)}dailycrafting(){return new xt(this)}delivery(){return new V(this).delivery()}dungeons(){return new yt(this)}dyes(){return new bt(this)}finishers(){return new Et(this)}gliders(){return new $t(this)}home(){return{cats:()=>new kt(this),nodes:()=>new Pt(this)}}inventory(){return new It(this)}luck(){return new Ct(this)}mailcarriers(){return new Rt(this)}masteries(){return new Ut(this)}mapchests(){return new _t(this)}mastery(){return{points:()=>new qt(this)}}materials(){return new jt(this)}minis(){return new Dt(this)}mounts(){return{skins:()=>new Tt(this),types:()=>new Ot(this)}}novelties(){return new St(this)}outfits(){return new Mt(this)}pvp(){return new N(this,!0)}raids(){return new zt(this)}recipes(){return new At(this)}skins(){return new Bt(this)}titles(){return new Nt(this)}transactions(){return new V(this).transactions()}wallet(){return new Gt(this)}worldbosses(){return new Zt(this)}blob(){return at(this)}}class ft extends C{constructor(t){super(t),this.url="/v2/account/achievements",this.isAuthenticated=!0,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=300}ids(){return Promise.reject(new Error("method not supported for this endpoint"))}get(t){return t?super.get(t):this.all()}all(){return super.get("",!0)}}class gt extends C{constructor(t){super(t),this.url="/v2/account/bank",this.isAuthenticated=!0,this.cacheTime=300}}class xt extends C{constructor(t){super(t),this.url="/v2/account/dailycrafting",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await Jt(this)?[]:super.get()}}class yt extends C{constructor(t){super(t),this.url="/v2/account/dungeons",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await Jt(this)?[]:super.get()}}class bt extends C{constructor(t){super(t),this.url="/v2/account/dyes",this.isAuthenticated=!0,this.cacheTime=300}}class Et extends C{constructor(t){super(t),this.url="/v2/account/finishers",this.isAuthenticated=!0,this.cacheTime=300}}class $t extends C{constructor(t){super(t),this.url="/v2/account/gliders",this.isAuthenticated=!0,this.cacheTime=300}}class kt extends C{constructor(t){super(t),this.url="/v2/account/home/cats",this.isAuthenticated=!0,this.cacheTime=300}}class Pt extends C{constructor(t){super(t),this.url="/v2/account/home/nodes",this.isAuthenticated=!0,this.cacheTime=300}}class It extends C{constructor(t){super(t),this.url="/v2/account/inventory",this.isAuthenticated=!0,this.cacheTime=300}}class Ct extends C{constructor(t){super(t),this.url="/v2/account/luck",this.isAuthenticated=!0,this.cacheTime=300}async get(){const t=await super.get();return 0===t.length?0:t[0].value}}class Rt extends C{constructor(t){super(t),this.url="/v2/account/mailcarriers",this.isAuthenticated=!0,this.cacheTime=300}}class _t extends C{constructor(t){super(t),this.url="/v2/account/mapchests",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await Jt(this)?[]:super.get()}}class Ut extends C{constructor(t){super(t),this.url="/v2/account/masteries",this.isAuthenticated=!0,this.cacheTime=300}}class qt extends C{constructor(t){super(t),this.url="/v2/account/mastery/points",this.isAuthenticated=!0,this.cacheTime=300}}class jt extends C{constructor(t){super(t),this.url="/v2/account/materials",this.isAuthenticated=!0,this.cacheTime=300}}class Dt extends C{constructor(t){super(t),this.url="/v2/account/minis",this.isAuthenticated=!0,this.cacheTime=300}}class Tt extends C{constructor(t){super(t),this.url="/v2/account/mounts/skins",this.isAuthenticated=!0,this.cacheTime=300}}class Ot extends C{constructor(t){super(t),this.url="/v2/account/mounts/types",this.isAuthenticated=!0,this.cacheTime=300}}class St extends C{constructor(t){super(t),this.url="/v2/account/novelties",this.isAuthenticated=!0,this.cacheTime=300}}class Mt extends C{constructor(t){super(t),this.url="/v2/account/outfits",this.isAuthenticated=!0,this.cacheTime=300}}class zt extends C{constructor(t){super(t),this.url="/v2/account/raids",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await async function(t){const s=await new mt(t).schema("2019-03-26").get();return new Date(s.last_modified)<vt()}(this)?[]:super.get()}}class At extends C{constructor(t){super(t),this.url="/v2/account/recipes",this.isAuthenticated=!0,this.cacheTime=300}}class Bt extends C{constructor(t){super(t),this.url="/v2/account/skins",this.isAuthenticated=!0,this.cacheTime=300}}class Nt extends C{constructor(t){super(t),this.url="/v2/account/titles",this.isAuthenticated=!0,this.cacheTime=300}}class Gt extends C{constructor(t){super(t),this.url="/v2/account/wallet",this.isAuthenticated=!0,this.cacheTime=300}}class Zt extends C{constructor(t){super(t),this.url="/v2/account/worldbosses",this.isAuthenticated=!0,this.cacheTime=300}async get(){return await Jt(this)?[]:super.get()}}async function Jt(t){const s=await new mt(t).schema("2019-03-26").get();return new Date(s.last_modified)<wt()}var Wt=mt;class Ft extends C{constructor(t){super(t),this.url="/v2/achievements/categories",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class Ht extends C{constructor(t){super(t),this.url="/v2/achievements/groups",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class Kt extends C{constructor(t){super(t),this.url="/v2/achievements/daily",this.cacheTime=3600}}class Lt extends C{constructor(t){super(t),this.url="/v2/achievements/daily/tomorrow",this.cacheTime=3600}}class Qt extends C{constructor(t){super(t),this.url="/v2/backstory/answers",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!0,this.isLocalized=!0,this.cacheTime=86400}}class Xt extends C{constructor(t){super(t),this.url="/v2/backstory/questions",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!0,this.isLocalized=!0,this.cacheTime=86400}}class Vt extends C{constructor(t,s){super(t),this.url=`/v2/continents/${s}/floors`,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}class Yt extends C{constructor(t,s){super(t),this.url="/v2/emblem/"+s,this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}function ts(t){let s=t.events,e=[];const r=Object.keys(s);for(let t=0;t!==r.length;t++)e.push(Object.assign({id:r[t]},s[r[t]]));return e}class ss extends C{constructor(t){super(t),this.url="/v2/guild/permissions",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class es extends C{constructor(t){super(t),this.url="/v2/guild/search",this.cacheTime=3600}name(t){return super.get("?name="+encodeURIComponent(t),!0).then(t=>t[0])}}class rs extends C{constructor(t){super(t),this.url="/v2/guild/upgrades",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class is extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/log`,this.isAuthenticated=!0,this.cacheTime=300}since(t){return super.get("?since="+t,!0)}}class ns extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/members`,this.isAuthenticated=!0,this.cacheTime=300}}class hs extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/ranks`,this.isAuthenticated=!0,this.cacheTime=300}}class os extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/stash`,this.isAuthenticated=!0,this.cacheTime=300}}class us extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/storage`,this.isAuthenticated=!0,this.cacheTime=300}}class cs extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/teams`,this.isAuthenticated=!0,this.cacheTime=300}}class as extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/treasury`,this.isAuthenticated=!0,this.cacheTime=300}}class ls extends C{constructor(t,s){super(t),this.url=`/v2/guild/${encodeURIComponent(s)}/upgrades`,this.isAuthenticated=!0,this.cacheTime=300}}class ds extends C{constructor(t){super(t),this.url="/v2/home/cats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}class ps extends C{constructor(t){super(t),this.url="/v2/home/nodes",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}}class ws extends C{constructor(t){super(t),this.url="/v2/mounts/skins",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class vs extends C{constructor(t){super(t),this.url="/v2/mounts/types",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class ms extends C{constructor(t){super(t),this.url="/v2/recipes/search",this.cacheTime=86400}input(t){return super.get("?input="+t,!0)}output(t){return super.get("?output="+t,!0)}}class fs extends C{constructor(t){super(t),this.url="/v2/stories/seasons",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class gs extends C{constructor(t){super(t),this.url="/v2/wvw/abilities",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class xs extends C{constructor(t){super(t),this.url="/v2/wvw/matches",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get("?world="+t,!0)}overview(){return new Es(this)}scores(){return new $s(this)}stats(t){return new ks(this,t)}}class ys extends C{constructor(t,s,e){super(t),this.team=e,this.id=s,this.url=`/v2/wvw/matches/stats/${s}/teams`}top(t){return new bs(this,this.id,this.team,t)}}class bs extends C{constructor(t,s,e,r){super(t),this.which=r,this.url=`/v2/wvw/matches/stats/${s}/teams/${e}/top/${r}`}}class Es extends C{constructor(t){super(t),this.url="/v2/wvw/matches/overview",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get("?world="+t,!0)}}class $s extends C{constructor(t){super(t),this.url="/v2/wvw/matches/scores",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get("?world="+t,!0)}}class ks extends C{constructor(t,s){super(t),this.id=s,this.url="/v2/wvw/matches/stats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=30}world(t){return super.get("?world="+t,!0)}teams(t){return new ys(this,this.id,t)}}class Ps extends C{constructor(t){super(t),this.url="/v2/wvw/objectives",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class Is extends C{constructor(t){super(t),this.url="/v2/wvw/upgrades",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}class Cs extends C{constructor(t){super(t),this.url="/v2/wvw/ranks",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}}var Rs={AccountEndpoint:Wt,AchievementsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/achievements",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}categories(){return new Ft(this)}groups(){return new Ht(this)}daily(){return new Kt(this)}dailyTomorrow(){return new Lt(this)}},BackstoryEndpoint:class extends C{answers(){return new Qt(this)}questions(){return new Xt(this)}},BuildEndpoint:class extends C{constructor(t){super(t),this.url="/v2/build",this.cacheTime=60}get(){return super.get().then(t=>t.id)}},CatsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/cats",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},CharactersEndpoint:R,ColorsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/colors",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},CommerceEndpoint:V,ContinentsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/continents",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}floors(t){return new Vt(this,t)}},CurrenciesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/currencies",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},DailycraftingEndpoint:class extends C{constructor(t){super(t),this.url="/v2/dailycrafting",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},DungeonsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/dungeons",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},EmblemEndpoint:class extends C{backgrounds(){return new Yt(this,"backgrounds")}foregrounds(){return new Yt(this,"foregrounds")}},EventsEndpoint:class extends C{constructor(t){super(t),this.url="/v1/event_details.json",this.cacheTime=86400}all(){return super.get().then(ts)}get(t){return super.get("?event_id="+t,!0).then(t=>ts(t)[0])}},FilesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/files",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},FinishersEndpoint:class extends C{constructor(t){super(t),this.url="/v2/finishers",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},GlidersEndpoint:class extends C{constructor(t){super(t),this.url="/v2/gliders",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},GuildEndpoint:class extends C{constructor(t,s){super(t),this.id=s,this.url="/v2/guild",this.isAuthenticated=!0,this.isOptionallyAuthenticated=!0,this.cacheTime=3600}get(t){return super.get("/"+t,!0)}permissions(){return new ss(this)}search(t){return new es(this,t)}upgrades(){return void 0===this.id?new rs(this):new ls(this,this.id)}log(){return new is(this,this.id)}members(){return new ns(this,this.id)}ranks(){return new hs(this,this.id)}stash(){return new os(this,this.id)}storage(){return new us(this,this.id)}teams(){return new cs(this,this.id)}treasury(){return new as(this,this.id)}},HomeEndpoint:class extends C{cats(){return new ds(this)}nodes(){return new ps(this)}},ItemsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/items",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}},ItemstatsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/itemstats",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},LegendsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/legends",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},MailcarriersEndpoint:class extends C{constructor(t){super(t),this.url="/v2/mailcarriers",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MapchestsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/mapchests",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MapsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/maps",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MasteriesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/masteries",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MaterialsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/materials",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MinisEndpoint:class extends C{constructor(t){super(t),this.url="/v2/minis",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},MountsEndpoint:class extends C{skins(){return new ws(this)}types(){return new vs(this)}},NodesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/nodes",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},NoveltiesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/novelties",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},OutfitsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/outfits",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},PetsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/pets",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},ProfessionsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/professions",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},PvpEndpoint:N,QuaggansEndpoint:class extends C{constructor(t){super(t),this.url="/v2/quaggans",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},QuestsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/quests",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},RacesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/races",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},RaidsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/raids",this.isPaginated=!0,this.isBulk=!0,this.cacheTime=86400}},RecipesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/recipes",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.cacheTime=86400}search(){return new ms(this)}},SkillsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/skills",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},SkinsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/skins",this.isPaginated=!0,this.isBulk=!0,this.supportsBulkAll=!1,this.isLocalized=!0,this.cacheTime=86400}},SpecializationsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/specializations",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},StoriesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/stories",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}seasons(){return new fs(this)}},TitlesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/titles",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},TokeninfoEndpoint:class extends C{constructor(t){super(t),this.url="/v2/tokeninfo",this.isAuthenticated=!0,this.cacheTime=60}},TraitsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/traits",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},WorldbossesEndpoint:class extends C{constructor(t){super(t),this.url="/v2/worldbosses",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},WorldsEndpoint:class extends C{constructor(t){super(t),this.url="/v2/worlds",this.isPaginated=!0,this.isBulk=!0,this.isLocalized=!0,this.cacheTime=86400}},WvwEndpoint:class extends C{abilities(){return new gs(this)}matches(){return new xs(this)}objectives(){return new Ps(this)}upgrades(){return new Is(this)}ranks(){return new Cs(this)}}};function _s(t,s,e){var r,i,n,h,o;function u(){var c=Date.now()-h;c<s&&c>=0?r=setTimeout(u,s-c):(r=null,e||(o=t.apply(n,i),n=i=null))}null==s&&(s=100);var c=function(){n=this,i=arguments,h=Date.now();var c=e&&!r;return r||(r=setTimeout(u,s)),c&&(o=t.apply(n,i),n=i=null),o};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(o=t.apply(n,i),n=i=null,clearTimeout(r),r=null)},c}_s.debounce=_s;var Us=_s;class qs{constructor(t="keyval-store",s="keyval"){this.storeName=s,this._dbp=new Promise((e,r)=>{const i=indexedDB.open(t,1);i.onerror=()=>r(i.error),i.onsuccess=()=>e(i.result),i.onupgradeneeded=()=>{i.result.createObjectStore(s)}})}_withIDBStore(t,s){return this._dbp.then(e=>new Promise((r,i)=>{const n=e.transaction(this.storeName,t);n.oncomplete=()=>r(),n.onabort=n.onerror=()=>i(n.error),s(n.objectStore(this.storeName))}))}}let js;function Ds(){return js||(js=new qs),js}const Ts=(Os=Object.freeze({__proto__:null,Store:qs,get:function(t,s=Ds()){let e;return s._withIDBStore("readonly",s=>{e=s.get(t)}).then(()=>e.result)},set:function(t,s,e=Ds()){return e._withIDBStore("readwrite",e=>{e.put(s,t)})},del:function(t,s=Ds()){return s._withIDBStore("readwrite",s=>{s.delete(t)})},clear:function(t=Ds()){return t._withIDBStore("readwrite",t=>{t.clear()})},keys:function(t=Ds()){const s=[];return t._withIDBStore("readonly",t=>{(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(s.push(this.result.key),this.result.continue())}}).then(()=>s)}}))&&Os.default||Os;var Os;let Ss=new class extends class{constructor(){this.schemaVersion="2019-03-20T00:00:00.000Z",this.lang="en",this.apiKey=!1,this.fetch=o,this.caches=[{get:a,set:l,mget:d,mset:p,flush:w}],this.debug=!1,this.client=this}schema(t){return this.schemaVersion=t,this.debugMessage("set the schema to "+t),this}language(t){return this.lang=t,this.debugMessage("set the language to "+t),this}authenticate(t){return this.apiKey=t,this.debugMessage("set the api key to "+t),this}cacheStorage(t){return this.caches=[].concat(t),this.debugMessage("updated the cache storage"),this}debugging(t){return this.debug=t,this}debugMessage(t){this.debug&&console.log("[gw2api-client] "+t)}flushCacheIfGameUpdated(){const t=this.build();return ot({cacheBuildId:()=>t._cacheGetSingle("cacheBuildId"),buildId:()=>t.live().get()}).then(s=>{let e=[];return s.cacheBuildId&&s.cacheBuildId<s.buildId&&(this.debugMessage("flushing the cache because of a new build"),e=this.caches.map(t=>()=>t.flush())),ot(e).then(()=>t._cacheSetSingle("cacheBuildId",s.buildId))})}account(){return new Rs.AccountEndpoint(this)}achievements(){return new Rs.AchievementsEndpoint(this)}backstory(){return new Rs.BackstoryEndpoint(this)}build(){return new Rs.BuildEndpoint(this)}cats(){return new Rs.CatsEndpoint(this)}characters(t){return new Rs.CharactersEndpoint(this,t)}colors(){return new Rs.ColorsEndpoint(this)}commerce(){return new Rs.CommerceEndpoint(this)}continents(){return new Rs.ContinentsEndpoint(this)}currencies(){return new Rs.CurrenciesEndpoint(this)}dailycrafting(){return new Rs.DailycraftingEndpoint(this)}dungeons(){return new Rs.DungeonsEndpoint(this)}emblem(){return new Rs.EmblemEndpoint(this)}events(){return new Rs.EventsEndpoint(this)}files(){return new Rs.FilesEndpoint(this)}finishers(){return new Rs.FinishersEndpoint(this)}gliders(){return new Rs.GlidersEndpoint(this)}guild(t){return new Rs.GuildEndpoint(this,t)}home(){return new Rs.HomeEndpoint(this)}items(){return new Rs.ItemsEndpoint(this)}itemstats(){return new Rs.ItemstatsEndpoint(this)}legends(){return new Rs.LegendsEndpoint(this)}mailcarriers(){return new Rs.MailcarriersEndpoint(this)}mapchests(){return new Rs.MapchestsEndpoint(this)}maps(){return new Rs.MapsEndpoint(this)}masteries(){return new Rs.MasteriesEndpoint(this)}materials(){return new Rs.MaterialsEndpoint(this)}minis(){return new Rs.MinisEndpoint(this)}mounts(){return new Rs.MountsEndpoint(this)}nodes(){return new Rs.NodesEndpoint(this)}novelties(){return new Rs.NoveltiesEndpoint(this)}outfits(){return new Rs.OutfitsEndpoint(this)}pets(){return new Rs.PetsEndpoint(this)}professions(){return new Rs.ProfessionsEndpoint(this)}pvp(){return new Rs.PvpEndpoint(this)}quaggans(){return new Rs.QuaggansEndpoint(this)}quests(){return new Rs.QuestsEndpoint(this)}races(){return new Rs.RacesEndpoint(this)}raids(){return new Rs.RaidsEndpoint(this)}recipes(){return new Rs.RecipesEndpoint(this)}skills(){return new Rs.SkillsEndpoint(this)}skins(){return new Rs.SkinsEndpoint(this)}specializations(){return new Rs.SpecializationsEndpoint(this)}stories(){return new Rs.StoriesEndpoint(this)}titles(){return new Rs.TitlesEndpoint(this)}tokeninfo(){return new Rs.TokeninfoEndpoint(this)}traits(){return new Rs.TraitsEndpoint(this)}worldbosses(){return new Rs.WorldbossesEndpoint(this)}worlds(){return new Rs.WorldsEndpoint(this)}wvw(){return new Rs.WvwEndpoint(this)}}{constructor(){super(),this.queues=new Map,this.endpoint_promises=new Map}async queue(t,s){const e=s.map(s=>t._cacheHash(s));let r=await t._cacheGetMany(e);if(r=r.filter(t=>t),r.length===s.length)return JSON.parse(JSON.stringify(r));if(this.queues.has(t.url)?this.queues.get(t.url).push(...s):this.queues.set(t.url,s),!this.endpoint_promises.has(t.url)){const s=new Promise((s,e)=>{window.setTimeout(()=>{this.endpoint_promises.delete(t.url);const r=[...new Set(this.queues.get(t.url))];this.queues.delete(t.url),t.many(r).then(s).catch(e)},1e3)});this.endpoint_promises.set(t.url,s)}const i=this.endpoint_promises.get(t.url);return(await i).filter(t=>s.includes(t.id))}};Ss.schema("2020-08-14T00:00:00Z"),Ss.language("en"),Ss.cacheStorage(function(t){t=Object.assign({storageKey:"gw2api-cache",gcTick:3e5,persistDebounce:3e3,storageEngine:Ts},t);let s={};const e=t.storageEngine,r=t.storageKey,i=Us((function(){e.set(r,s).catch(t=>{console.warn("Failed persisting cache",t)})}),t.persistDebounce);function n(t){let e=s[t],r=(new Date).getTime();return e&&e.expiry>r?e.value:null}function h(t,e,r){s[t]={value:e,expiry:(new Date).getTime()+1e3*r},i()}function o(){const t=(new Date).getTime(),e=Object.keys(s);for(let r=0;r!==e.length;r++)s[e[r]].expiry<t&&delete s[e[r]];i()}return setInterval(o,t.gcTick),e.get(r).then(t=>{t&&(s=t)}),o(),{get:function(t){return Promise.resolve(n(t))},set:function(t,s,e){return h(t,s,e),Promise.resolve(!0)},mget:function(t){let s=t.map(t=>n(t));return Promise.resolve(s)},mset:function(t){return t.map(t=>{h(t[0],t[1],t[2])}),Promise.resolve(!0)},flush:function(){return s={},e.delete(r),Promise.resolve(!0)},_getStorage:function(){return s}}}()),Ss.items().cacheTime=2592e3,Ss.commerce().prices().cacheTime=300;export{Ss as a}